define(["ngAMD"],function(ngAMD){ngAMD.directive("rippleButton",[function(){return{restrict:"AC",scope:{rOpacity:"@",rSize:"@",rDuration:"@",rColor:"@",isOpen:"="},link:function(scope,element,attrs){if(scope.isOpen===!1)return;var COLOR_REGEXP="^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$",cutHex=function(h){return h.charAt(0)=="#"?h.substring(1,7):h},hexToR=function(h){return parseInt(cutHex(h).substring(0,2),16)},hexToG=function(h){return parseInt(cutHex(h).substring(2,4),16)},hexToB=function(h){return parseInt(cutHex(h).substring(4,6),16)};element.css("overflow","hidden"),element.css("transform","translateZ(0)"),scope.rOpacity&&scope.rOpacity>=0&&scope.rOpacity<=1||(scope.rOpacity=".5"),scope.rSize||(scope.rSize=200),scope.rDuration||(scope.rDuration=1.5),scope.rDurationS=scope.rDuration+"s";var r=38,g=42,b=49,validates=new RegExp(COLOR_REGEXP);scope.rColor&&validates.test(scope.rColor)&&(r=hexToR(scope.rColor),g=hexToG(scope.rColor),b=hexToB(scope.rColor));var x,y=0,size={},offsets,func=function(e){function getPos(element){var de=document.documentElement,box=element.getBoundingClientRect(),top=box.top+window.pageYOffset-de.clientTop,left=box.left+window.pageXOffset-de.clientLeft;return{top:top,left:left}}var ripple=this.querySelector("b.drop");ripple==null&&(ripple=document.createElement("b"),ripple.className+="drop",this.insertBefore(ripple,this.firstChild),ripple.style.background="rgba("+r+","+g+","+b+","+scope.rOpacity+")",ripple.style.height=scope.rSize+"px",ripple.style.width=scope.rSize+"px",size.x=ripple.offsetWidth,size.y=ripple.offsetHeight);var eventType=e.type;ripple.style.animationDuration=null,ripple.style.oAnimationDuration=null,ripple.style.webkitAnimationDuration=null,ripple.style.mozAnimationDuration=null,ripple.style.msAnimationDuration=null,ripple.className=ripple.className.replace(/ ?(animate)/g,""),x=e.pageX,y=e.pageY,offsets=getPos(element[0]);var innerPos={};innerPos.x=e.pageX,innerPos.y=e.pageY,ripple.style.left=innerPos.x-offsets.left-size.x/2+"px",ripple.style.top=innerPos.y-offsets.top-size.y/2+"px",ripple.style.animationDuration=scope.rDurationS,ripple.style.oAnimationDuration=scope.rDurationS,ripple.style.webkitAnimationDuration=scope.rDurationS,ripple.style.mozAnimationDuration=scope.rDurationS,ripple.style.msAnimationDuration=scope.rDurationS,ripple.className+=" animate"};element.on("click",func)}}}])});