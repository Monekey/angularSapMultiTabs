define(["require","ngAMD","angular","uploadService","echart"],function(require){var ngAMD=require("ngAMD"),angular=require("angular"),upload=require("uploadService"),echart=require("echart");ngAMD.controller("detailed",["$scope","appConstant","ajaxService","register","uploadService","$rootScope",function($scope,appConstant,ajaxService,register,uploadService,$rootScope){var tabData=$rootScope.TabsData,data=angular.copy(tabData);$scope.shop=data,$scope.from=data.from;var param={};for(var x in data)param[x]=data[x];param.pageNo="1",param.pageCount=appConstant.pageSet.numPerPage,param.otherShop=data.isOtherShop,param.shopId=data.id;var sessionId=$rootScope.sessionId;$scope.conditions={ajaxUrl:"reportcenter/savemoney/detailedList.do",request:param,filter:[{type:"normal",field:"终端",requestFiled:"terminalId",value:[],ajaxUrl:"reportcenter/terminal/list.do",request:{sessionId:sessionId}}]},$scope.pageSet={title:"列表",currentPage:appConstant.pageSet.currentPage,maxSize:appConstant.pageSet.maxSize,numPerPage:appConstant.pageSet.numPerPage},$scope.pageChanged=function(){var postObj=$scope.requestObj.request;postObj.pageNo=$scope.pageSet.currentPage,postObj.pageCount=$scope.pageSet.numPerPage,ajaxService.AjaxPost(postObj,$scope.conditions.ajaxUrl).then(function(result){$scope.resultList=result})},$scope.openSaveMoney=function(shop,flag){var shops={},postObj=$scope.requestObj.request;for(var x in postObj)shops[x]=postObj[x];for(var x in shop)shops[x]=shop[x];shops.shopId=0,flag==1?(shops.openShopId=shop.shopId,shops.xfShopId=shop.id):flag==2&&(shops.openShopId=shop.id,shops.xfShopId=shop.shopId);try{shops.date=$scope.requestObj.request.date}catch(e){shops.date=0}register.addToTabs({title:"储值明细",id:"saveMoneyDesc"+shop.id,template:"reportcenter/savemoney/saveMoneyDesc.html",ctrl:"reportcenter/savemoney/saveMoneyDesc",ctrlName:"saveMoneyDesc",ng_show:!1,type:"single",from:1001},shops)},$scope.openConsume=function(shop,flag){var shops={},postObj=$scope.requestObj.request;for(var x in postObj)shops[x]=postObj[x];for(var x in shop)shops[x]=shop[x];shops.shopId=0,flag==1?(shops.openShopId=shop.id,shops.xfShopId=shop.shopId):flag==2&&(shops.openShopId=shop.shopId,shops.xfShopId=shop.id);try{shops.date=$scope.requestObj.request.date}catch(e){shops.date=0}register.addToTabs({title:"消费明细",id:"memberConsume"+shop.id,template:"reportcenter/savemoney/memberConsume.html",ctrl:"reportcenter/savemoney/memberConsume",ctrlName:"memberConsume",ng_show:!1,type:"single",from:1001},shops)}}])});